<!DOCTYPE html>
<html>
  <head>
    <title>Diatheke SDK -- Cobalt</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Audio Output :: Diatheke SDK -- Cobalt</title>
<link rel="shortcut icon" href="/sdk-diatheke/images/favicon.ico" type="image/x-icon" />
<link href="/sdk-diatheke/css/nucleus.css" rel="stylesheet">
<link href="/sdk-diatheke/css/font-awesome.min.css" rel="stylesheet">
<link href="/sdk-diatheke/css/hybrid.css" rel="stylesheet">
<link href="/sdk-diatheke/css/featherlight.min.css" rel="stylesheet">
<link href="/sdk-diatheke/css/auto-complete.css" rel="stylesheet">
<link href="/sdk-diatheke/theme-original/style.css" rel="stylesheet">

  <link href="/sdk-diatheke/theme-original/variant-blue.css" rel="stylesheet">

<link rel="stylesheet" href="/sdk-diatheke/css/bootstrap.min.css">
<script src="/sdk-diatheke/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<link href="/sdk-diatheke/css/tabs.css" rel="stylesheet" type="text/css">
<script src="/sdk-diatheke/js/tabs.js"></script>


    
  </head>
  <body data-url="/sdk-diatheke/using-diatheke-sdk/session/audio-output/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/sdk-diatheke/images/logo-white.png" alt="Cobalt&rsquo;s SDK Documentation"></p>
<p>Diatheke SDK &ndash; Cobalt</p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/sdk-diatheke/js/lunr.min.js"></script>
		<script type="text/javascript" src="/sdk-diatheke/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "https:\/\/cobaltspeech.github.io\/sdk-diatheke";
        
		</script>
		<script type="text/javascript" src="/sdk-diatheke/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/sdk-diatheke/" class="dd-item">
            <a href="/sdk-diatheke/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/sdk-diatheke/getting-started/" class="dd-item
        ">
      <div>
      <a href="/sdk-diatheke/getting-started/">Getting Started</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/sdk-diatheke/using-diatheke-sdk/">Using Diatheke SDK</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/include/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/include/">
            Including the SDK
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/errors/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/errors/">
            Error Handling
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/connecting/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/connecting/">
            Connecting to the Server
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
    <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/sdk-diatheke/using-diatheke-sdk/session/">Sessions</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/create-session/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/create-session/">
            Creating a Session
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/event-stream/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/event-stream/">
            Event Stream
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/push-text/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/push-text/">
            Push Text
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/audio-input/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/audio-input/">
            Audio Input
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/audio-output/" class="dd-item active">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/audio-output/">
            Audio Output
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/streaming-asr/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/streaming-asr/">
            Streaming ASR
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/streaming-tts/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/streaming-tts/">
            Streaming TTS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/sdk-diatheke/protobuf/" class="dd-item
        ">
      <div>
      <a href="/sdk-diatheke/protobuf/">Diatheke API Reference</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/sdk-diatheke/glossary/" class="dd-item
        ">
      <div>
      <a href="/sdk-diatheke/glossary/">Glossary</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/cobaltspeech/sdk-diatheke" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="https://www.cobaltspeech.com/contact" target="_blank" rel="noopener"><i class='fa fa-bookmark'></i> <label>Contact us</label></a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        










 <a href='/sdk-diatheke/'>Diatheke SDK Documentation</a> > <a href='/sdk-diatheke/using-diatheke-sdk/'>Using Diatheke SDK</a> > <a href='/sdk-diatheke/using-diatheke-sdk/session/'>Sessions</a> > Audio Output

 

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#creating-the-audio-reply-stream">Creating the Audio Reply Stream</a></li>
    <li><a href="#receiving-audio">Receiving Audio</a></li>
  </ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Audio Output</h1>
  



    
    
    
    <p>The audio output stream is the audio version of the
<a href="../event-stream#reply-event">Reply event</a>. When Diatheke wants to reply
to user input, this stream will receive notifications with the text of
the reply, and the <a href="../../../glossary#tts">TTS</a> generated audio bytes.</p>
<h2 id="creating-the-audio-reply-stream">Creating the Audio Reply Stream</h2>
<p>Before any audio for the session can be received, the client code should
first create the audio reply stream. Similar to the event stream, this
stream will be closed by the server when the session ends.</p>
<div class='code-tabs'><ul class="nav-tabs"></ul><div class="tab-content">

<div class="tab-pane" title="Go">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">
<span style="color:#999;font-style:italic">// Create the stream using the client and session ID
</span><span style="color:#999;font-style:italic"></span>stream, err := client.<span style="color:#447fcf">StreamAudioReplies</span>(context.<span style="color:#447fcf">Background</span>(), sessionID)

<span style="color:#999;font-style:italic">// OR create the stream using the Session object
</span><span style="color:#999;font-style:italic"></span>stream, err := session.<span style="color:#447fcf">StreamAudioReplies</span>(context.<span style="color:#447fcf">Background</span>())
</code></pre></div>
</div>


<div class="tab-pane" title="C&#43;&#43;">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++">
<span style="color:#999;font-style:italic">// The stream is returned as a std::unique_ptr
</span><span style="color:#999;font-style:italic"></span>std::unique_ptr&lt;Diatheke::AudioReplyStream&gt; stream;

<span style="color:#999;font-style:italic">// Create the stream using the client and session ID
</span><span style="color:#999;font-style:italic"></span>stream = client.streamAudioReplies(sessionID);

<span style="color:#999;font-style:italic">// OR create the stream using the Session object
</span><span style="color:#999;font-style:italic"></span>stream = session.streamAudioReplies();
</code></pre></div>
</div>


<div class="tab-pane" title="Python">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#999;font-style:italic"># Create the stream using the client and session ID</span>
stream = client.stream_audio_replies(session_id)

<span style="color:#999;font-style:italic"># OR create the stream using the Session object</span>
stream = session.stream_audio_replies()
</code></pre></div>
</div>


<div class="tab-pane" title="Swift/iOS">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">
# Create the stream using the client and session ID
<span style="color:#6ab825;font-weight:bold">let</span> <span style="color:#40ffff">stream</span> = client.streamAudioReplies(sessionID: sessionID) { (reply) <span style="color:#6ab825;font-weight:bold">in</span>
    <span style="color:#999;font-style:italic">// Handle audio reply</span>
}

# OR create the stream using the Session object
<span style="color:#6ab825;font-weight:bold">let</span> <span style="color:#40ffff">stream</span> = session.streamAudioReplies { (reply) <span style="color:#6ab825;font-weight:bold">in</span>
    <span style="color:#999;font-style:italic">// Handle audio reply</span>
}
</code></pre></div>
</div>


<div class="tab-pane" title="Java/Android">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
DiathekeOuterClass.<span style="color:#bbb">SessionID</span> mSession= DiathekeOuterClass.<span style="color:#bbb">SessionID</span>.<span style="color:#bbb">newBuilder</span>()
                .<span style="color:#bbb">setSessionId</span>(sessionId)
                .<span style="color:#bbb">build</span>();
mClient.<span style="color:#bbb">streamAudioReplies</span>(mSession, <span style="color:#6ab825;font-weight:bold">new</span> StreamObserver&lt;DiathekeOuterClass.<span style="color:#bbb">AudioReply</span>&gt;() {
    <span style="color:#ffa500">@Override</span>
    <span style="color:#6ab825;font-weight:bold">public</span> <span style="color:#6ab825;font-weight:bold">void</span> <span style="color:#447fcf">onNext</span>(DiathekeOuterClass.<span style="color:#bbb">AudioReply</span> value) {
        
    }

    <span style="color:#ffa500">@Override</span>
    <span style="color:#6ab825;font-weight:bold">public</span> <span style="color:#6ab825;font-weight:bold">void</span> <span style="color:#447fcf">onError</span>(Throwable t) {

    }

    <span style="color:#ffa500">@Override</span>
    <span style="color:#6ab825;font-weight:bold">public</span> <span style="color:#6ab825;font-weight:bold">void</span> <span style="color:#447fcf">onCompleted</span>() {

    }
});
</code></pre></div>
</div>


</div></div>

<h2 id="receiving-audio">Receiving Audio</h2>
<p>A single reply from Diatheke will have multiple messages on the audio reply
stream. First, it will receive a message containing the text of the reply.
Then, it will receive one or more messages containing the 
<a href="../../../glossary#TTS">TTS</a> generated audio data. Lastly, it will receive
an empty message that contains no data, but serves as an indicator that the
reply has finished TTS generation and that no more data will be coming for
the current reply. An example showing how to handle these cases is given
below.</p>
<p>The TTS generated audio data will be formatted and encoded based on the
specific TTS model being used for the session (as defined in the Diatheke
server config file). It is the client code&rsquo;s responsibility to handle
the output audio, whether it sends it to an output device (e.g., speakers),
saves it to a file, or some other processing of the audio data.</p>
<div class='code-tabs'><ul class="nav-tabs"></ul><div class="tab-content">

<div class="tab-pane" title="Go">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">
<span style="color:#6ab825;font-weight:bold">for</span> {
    <span style="color:#999;font-style:italic">// Wait for replies from the server until the stream is closed,
</span><span style="color:#999;font-style:italic"></span>    <span style="color:#999;font-style:italic">// which will happen when the session is closed or the stream&#39;s
</span><span style="color:#999;font-style:italic"></span>    <span style="color:#999;font-style:italic">// context ends.
</span><span style="color:#999;font-style:italic"></span>    msg, err := stream.<span style="color:#447fcf">Recv</span>()

    <span style="color:#999;font-style:italic">// This indicates the stream has finished, which will happen
</span><span style="color:#999;font-style:italic"></span>    <span style="color:#999;font-style:italic">// when the session ends or the context used to create the stream
</span><span style="color:#999;font-style:italic"></span>    <span style="color:#999;font-style:italic">// closes.
</span><span style="color:#999;font-style:italic"></span>    <span style="color:#6ab825;font-weight:bold">if</span> err == io.EOF {
        <span style="color:#6ab825;font-weight:bold">break</span>
    }
    <span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
        fmt.<span style="color:#447fcf">Printf</span>(<span style="color:#ed9d13">&#34;Error: %v\n&#34;</span>, err)
        <span style="color:#6ab825;font-weight:bold">return</span>
    }

    <span style="color:#999;font-style:italic">// Check which message type we have received.
</span><span style="color:#999;font-style:italic"></span>    <span style="color:#6ab825;font-weight:bold">switch</span> reply := msg.OutputMessage.(<span style="color:#6ab825;font-weight:bold">type</span>) {
    <span style="color:#6ab825;font-weight:bold">case</span> *diathekepb.AudioReply_Text:
        <span style="color:#999;font-style:italic">// The text of the reply comes first for a reply from Diatheke.
</span><span style="color:#999;font-style:italic"></span>        fmt.<span style="color:#447fcf">Printf</span>(<span style="color:#ed9d13">&#34;Text: %s\n&#34;</span>, reply.Text)

    <span style="color:#6ab825;font-weight:bold">case</span> *diathekepb.AudioReply_Data:
        <span style="color:#999;font-style:italic">// Audio data is received until speech synthesis is done.
</span><span style="color:#999;font-style:italic"></span>        fmt.<span style="color:#447fcf">Printf</span>(<span style="color:#ed9d13">&#34;Data size (bytes): %v\n&#34;</span>, <span style="color:#24909d">len</span>(reply.Data))

    <span style="color:#6ab825;font-weight:bold">case</span> *diathekepb.AudioReply_End:
        <span style="color:#999;font-style:italic">// This message comes at the end of a reply, after speech synthesis
</span><span style="color:#999;font-style:italic"></span>        <span style="color:#999;font-style:italic">// is complete. It has no data.
</span><span style="color:#999;font-style:italic"></span>        fmt.<span style="color:#447fcf">Printf</span>(<span style="color:#ed9d13">&#34;Reply complete\n&#34;</span>)

    <span style="color:#6ab825;font-weight:bold">default</span>:
        fmt.<span style="color:#447fcf">Printf</span>(<span style="color:#ed9d13">&#34;received unexpected AudioReply type\n&#34;</span>)
    }
</code></pre></div>
</div>


<div class="tab-pane" title="C&#43;&#43;">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++">
<span style="color:#999;font-style:italic">// Wait for replies until the stream is closed, which will happen when
</span><span style="color:#999;font-style:italic">// the session is closed or the stream&#39;s context stops.
</span><span style="color:#999;font-style:italic"></span>cobaltspeech::diatheke::AudioReply reply;
<span style="color:#6ab825;font-weight:bold">while</span> (stream-&gt;waitForReply(&amp;reply))
{
    <span style="color:#999;font-style:italic">// Check which message type we have received
</span><span style="color:#999;font-style:italic"></span>    <span style="color:#6ab825;font-weight:bold">if</span> (reply.has_text())
    {
        <span style="color:#999;font-style:italic">// The text of the reply comes first for a reply from Diatheke.
</span><span style="color:#999;font-style:italic"></span>        std::cout &lt;&lt; <span style="color:#ed9d13">&#34;Text: &#34;</span> &lt;&lt; reply.text() &lt;&lt; std::endl;
    }
    <span style="color:#6ab825;font-weight:bold">else</span> <span style="color:#447fcf">if</span> (reply.has_data())
    {
        <span style="color:#999;font-style:italic">// Audio data is received until speech synthesis is done.
</span><span style="color:#999;font-style:italic"></span>        <span style="color:#999;font-style:italic">// It is returned as a string (think of it as an array of
</span><span style="color:#999;font-style:italic"></span>        <span style="color:#999;font-style:italic">// chars/bytes).
</span><span style="color:#999;font-style:italic"></span>        std::string audioData = reply.data();
        std::cout &lt;&lt; <span style="color:#ed9d13">&#34;Data size (bytes): &#34;</span> &lt;&lt; audioData.size() &lt;&lt; std::endl;
    }
    <span style="color:#6ab825;font-weight:bold">else</span> <span style="color:#447fcf">if</span> (reply.has_end())
    {
        <span style="color:#999;font-style:italic">// This message comes at the end of a reply, after speech synthesis
</span><span style="color:#999;font-style:italic"></span>        <span style="color:#999;font-style:italic">// is complete. It has no data.
</span><span style="color:#999;font-style:italic"></span>        std::cout &lt;&lt; <span style="color:#ed9d13">&#34;Reply complete&#34;</span> &lt;&lt; std::endl;
    }
    <span style="color:#6ab825;font-weight:bold">else</span>
    {
        std::cerr &lt;&lt; <span style="color:#ed9d13">&#34;received unexpected AudioReply type&#34;</span> &lt;&lt; std::endl;
    }
}

stream-&gt;close();
</code></pre></div>
</div>


<div class="tab-pane" title="Python">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#999;font-style:italic"># Wait for replies from the server until the stream is closed, which</span>
<span style="color:#999;font-style:italic"># will happen when the session is closed.</span>
<span style="color:#6ab825;font-weight:bold">for</span> msg <span style="color:#6ab825;font-weight:bold">in</span> stream:
    <span style="color:#999;font-style:italic"># Check which message type we have received</span>
    <span style="color:#6ab825;font-weight:bold">if</span> msg.HasField(<span style="color:#ed9d13">&#34;text&#34;</span>):
        <span style="color:#999;font-style:italic"># The text of the reply comes first for a reply from Diatheke</span>
        <span style="color:#6ab825;font-weight:bold">print</span>(<span style="color:#ed9d13">&#34;Text: &#34;</span> + reply.text)

    <span style="color:#6ab825;font-weight:bold">elif</span> msg.HasField(<span style="color:#ed9d13">&#34;data&#34;</span>):
        <span style="color:#999;font-style:italic"># Audio data is received until speech synthesis is done.</span>
        <span style="color:#6ab825;font-weight:bold">print</span>(<span style="color:#ed9d13">&#34;Data size (bytes): {}&#34;</span>.format(<span style="color:#24909d">len</span>(reply.data)))

    <span style="color:#6ab825;font-weight:bold">elif</span> msg.HasField(<span style="color:#ed9d13">&#34;end&#34;</span>):
        <span style="color:#999;font-style:italic"># This message comes at the end of a reply, after speech synthesis</span>
        <span style="color:#999;font-style:italic"># is complete. It has no data.</span>
        <span style="color:#6ab825;font-weight:bold">print</span>(<span style="color:#ed9d13">&#34;Reply complete&#34;</span>)

    <span style="color:#6ab825;font-weight:bold">else</span>:
        <span style="color:#6ab825;font-weight:bold">print</span>(<span style="color:#ed9d13">&#34;Received unexpected AudioReply type&#34;</span>)
</code></pre></div>
</div>


<div class="tab-pane" title="Swift/iOS">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift">
<span style="color:#999;font-style:italic">// Handle replies from the server until the stream is closed, which</span>
<span style="color:#999;font-style:italic">// will happen when the session is closed.</span>
<span style="color:#6ab825;font-weight:bold">let</span> <span style="color:#40ffff">stream</span> = session.streamAudioReplies { (reply) <span style="color:#6ab825;font-weight:bold">in</span>
    <span style="color:#6ab825;font-weight:bold">guard</span> <span style="color:#6ab825;font-weight:bold">let</span> <span style="color:#40ffff">outputMessage</span> = reply.outputMessage <span style="color:#6ab825;font-weight:bold">else</span> { <span style="color:#6ab825;font-weight:bold">return</span> }
    
    <span style="color:#6ab825;font-weight:bold">switch</span> outputMessage {
    <span style="color:#6ab825;font-weight:bold">case</span> .text(<span style="color:#6ab825;font-weight:bold">let</span> <span style="color:#40ffff">text</span>):
        print(<span style="color:#ed9d13">&#34;Text: </span><span style="color:#ed9d13">\(</span>text<span style="color:#ed9d13">)</span><span style="color:#ed9d13">&#34;</span>)
    <span style="color:#6ab825;font-weight:bold">case</span> .data(<span style="color:#6ab825;font-weight:bold">let</span> <span style="color:#40ffff">audioData</span>):
        print(<span style="color:#ed9d13">&#34;Data size (bytes): </span><span style="color:#ed9d13">\(</span>audioData.count<span style="color:#ed9d13">)</span><span style="color:#ed9d13">&#34;</span>)
    <span style="color:#6ab825;font-weight:bold">case</span> .end(<span style="color:#6ab825;font-weight:bold">_</span>):
        print(<span style="color:#ed9d13">&#34;Reply complete&#34;</span>)
    }
}
</code></pre></div>
</div>


<div class="tab-pane" title="Java/Android">
  <div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
 <span style="color:#ffa500">@Override</span>
<span style="color:#6ab825;font-weight:bold">public</span> <span style="color:#6ab825;font-weight:bold">void</span> <span style="color:#447fcf">onNext</span>(DiathekeOuterClass.<span style="color:#bbb">AudioReply</span> value) {
    DiathekeOuterClass.<span style="color:#bbb">AudioReply</span>.<span style="color:#bbb">OutputMessageCase</span> outputMessageCase = value.<span style="color:#bbb">getOutputMessageCase</span>();
    <span style="color:#6ab825;font-weight:bold">switch</span> (outputMessageCase) {
        <span style="color:#6ab825;font-weight:bold">case</span> DATA:
            <span style="color:#999;font-style:italic">// Audio data is received until speech synthesis is done.
</span><span style="color:#999;font-style:italic"></span>            ByteString data = value.<span style="color:#bbb">getData</span>();
            Log.<span style="color:#bbb">i</span>(<span style="color:#ed9d13">&#34;DATA&#34;</span>,String.<span style="color:#bbb">format</span>(<span style="color:#ed9d13">&#34;Data size %d&#34;</span>,data.<span style="color:#bbb">size</span>()));
            <span style="color:#6ab825;font-weight:bold">break</span>;
        <span style="color:#6ab825;font-weight:bold">case</span> TEXT:
                <span style="color:#999;font-style:italic">//The text of the reply comes first for a reply from Diatheke
</span><span style="color:#999;font-style:italic"></span>            String text = value.<span style="color:#bbb">getText</span>();
            Log.<span style="color:#bbb">i</span>(<span style="color:#ed9d13">&#34;TEXT&#34;</span>,String.<span style="color:#bbb">format</span>(<span style="color:#ed9d13">&#34;Text: %s&#34;</span>,text));
            <span style="color:#6ab825;font-weight:bold">break</span>;
        <span style="color:#6ab825;font-weight:bold">case</span> END:
            <span style="color:#999;font-style:italic">//This message comes at the end of a reply, after speech synthesis
</span><span style="color:#999;font-style:italic"></span>            <span style="color:#999;font-style:italic">//is complete. It has no data.
</span><span style="color:#999;font-style:italic"></span>            Log.<span style="color:#bbb">i</span>(<span style="color:#ed9d13">&#34;END&#34;</span>,<span style="color:#ed9d13">&#34;END&#34;</span>);
            <span style="color:#6ab825;font-weight:bold">break</span>;
    }
}
</code></pre></div>
</div>


</div></div>



    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/sdk-diatheke/using-diatheke-sdk/session/audio-input/" title="Audio Input"> <i class="fa fa-chevron-left"></i><label>Audio Input</label></a>
    <a class="nav nav-next" href="/sdk-diatheke/using-diatheke-sdk/streaming-asr/" title="Streaming ASR" style="margin-right: 0px;"><label>Streaming ASR</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/sdk-diatheke/js/clipboard.min.js"></script>
<script src="/sdk-diatheke/js/featherlight.min.js"></script>
<script src="/sdk-diatheke/js/html5shiv-printshiv.min.js"></script>

<script src="/sdk-diatheke/js/modernizr.custom.71422.js"></script>
<script src="/sdk-diatheke/js/docdock.js"></script>
<script src="/sdk-diatheke/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>