<!DOCTYPE html>
<html>
  <head>
    <title>Diatheke SDK -- Cobalt</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Connecting to the Server :: Diatheke SDK -- Cobalt</title>
<link rel="shortcut icon" href="/sdk-diatheke/images/favicon.ico" type="image/x-icon" />
<link href="/sdk-diatheke/css/nucleus.css" rel="stylesheet">
<link href="/sdk-diatheke/css/font-awesome.min.css" rel="stylesheet">
<link href="/sdk-diatheke/css/hybrid.css" rel="stylesheet">
<link href="/sdk-diatheke/css/featherlight.min.css" rel="stylesheet">
<link href="/sdk-diatheke/css/auto-complete.css" rel="stylesheet">
<link href="/sdk-diatheke/theme-original/style.css" rel="stylesheet">

  <link href="/sdk-diatheke/theme-original/variant-blue.css" rel="stylesheet">

<link rel="stylesheet" href="/sdk-diatheke/css/bootstrap.min.css">
<script src="/sdk-diatheke/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<link href="/sdk-diatheke/css/tabs.css" rel="stylesheet" type="text/css">
<script src="/sdk-diatheke/js/tabs.js"></script>


    
  </head>
  <body data-url="/sdk-diatheke/using-diatheke-sdk/connecting/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/sdk-diatheke/images/logo-white.png" alt="Cobalt&rsquo;s SDK Documentation"></p>
<p>Diatheke SDK &ndash; Cobalt</p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/sdk-diatheke/js/lunr.min.js"></script>
		<script type="text/javascript" src="/sdk-diatheke/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "https:\/\/cobaltspeech.github.io\/sdk-diatheke";
        
		</script>
		<script type="text/javascript" src="/sdk-diatheke/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/sdk-diatheke/" class="dd-item">
            <a href="/sdk-diatheke/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/sdk-diatheke/getting-started/" class="dd-item
        ">
      <div>
      <a href="/sdk-diatheke/getting-started/">Getting Started</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/sdk-diatheke/using-diatheke-sdk/">Using Diatheke SDK</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/include/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/include/">
            Including the SDK
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/errors/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/errors/">
            Error Handling
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/connecting/" class="dd-item active">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/connecting/">
            Connecting to the Server
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
    <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/" class="dd-item haschildren
        ">
      <div>
      <a href="/sdk-diatheke/using-diatheke-sdk/session/">Sessions</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/create-session/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/create-session/">
            Creating a Session
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/event-stream/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/event-stream/">
            Event Stream
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/push-text/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/push-text/">
            Push Text
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/audio-input/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/audio-input/">
            Audio Input
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/session/audio-output/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/session/audio-output/">
            Audio Output
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/streaming-asr/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/streaming-asr/">
            Streaming ASR
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-diatheke/using-diatheke-sdk/streaming-tts/" class="dd-item">
        <div>
          <a href="/sdk-diatheke/using-diatheke-sdk/streaming-tts/">
            Streaming TTS
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/sdk-diatheke/protobuf/" class="dd-item
        ">
      <div>
      <a href="/sdk-diatheke/protobuf/">Diatheke API Reference</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/sdk-diatheke/glossary/" class="dd-item
        ">
      <div>
      <a href="/sdk-diatheke/glossary/">Glossary</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/cobaltspeech/sdk-diatheke" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="https://www.cobaltspeech.com/contact" target="_blank" rel="noopener"><i class='fa fa-bookmark'></i> <label>Contact us</label></a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/sdk-diatheke/'>Diatheke SDK Documentation</a> > <a href='/sdk-diatheke/using-diatheke-sdk/'>Using Diatheke SDK</a> > Connecting to the Server

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#default-connection">Default Connection</a></li>
    <li><a href="#insecure-connection">Insecure Connection</a></li>
    <li><a href="#client-authentication">Client Authentication</a></li>
  </ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Connecting to the Server</h1>
  



    
    
    
    <p>Once you have the Diatheke server <a href="../../getting-started">up and running</a>,
you are ready to create a client connection.</p>
<p>First, you need to know the address (<code>host</code>:<code>port</code>) where the server is
running. This document will assume the values <code>127.0.0.1:9002</code>, but
these can be replaced with your server address in actual code.</p>
<h2 id="default-connection">Default Connection</h2>
<p>The following code snippet connects to the server and queries its version.  It uses our recommended
default setup, expecting the server to be listening on a TLS encrypted connection.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted -->import<!-- raw HTML omitted --> (
<!-- raw HTML omitted -->&quot;context&quot;<!-- raw HTML omitted -->
<!-- raw HTML omitted -->&quot;fmt&quot;<!-- raw HTML omitted -->
<!-- raw HTML omitted -->&quot;log&quot;<!-- raw HTML omitted --></p>
<pre><code>&lt;span style=&quot;color:#ed9d13&quot;&gt;&amp;#34;github.com/cobaltspeech/sdk-diatheke/grpc/go-diatheke&amp;#34;&lt;/span&gt;
</code></pre>
<p>)</p>
<p><!-- raw HTML omitted -->const<!-- raw HTML omitted --> serverAddr = <!-- raw HTML omitted -->&quot;127.0.0.1:9002&quot;<!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted -->func<!-- raw HTML omitted --> <!-- raw HTML omitted -->main<!-- raw HTML omitted -->() {
client, err := diatheke.<!-- raw HTML omitted -->NewClient<!-- raw HTML omitted -->(serverAddr)
<!-- raw HTML omitted -->if<!-- raw HTML omitted --> err != <!-- raw HTML omitted -->nil<!-- raw HTML omitted --> {
log.<!-- raw HTML omitted -->Fatal<!-- raw HTML omitted -->(err)
}</p>
<pre><code>&lt;span style=&quot;color:#999;font-style:italic&quot;&gt;// Be sure to close the client when we are done with it.
</code></pre>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->	<!-- raw HTML omitted -->defer<!-- raw HTML omitted --> client.<!-- raw HTML omitted -->Close<!-- raw HTML omitted -->()</p>
<pre><code>version, err := client.&lt;span style=&quot;color:#447fcf&quot;&gt;DiathekeVersion&lt;/span&gt;(context.&lt;span style=&quot;color:#447fcf&quot;&gt;Background&lt;/span&gt;())
&lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;if&lt;/span&gt; err != &lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;nil&lt;/span&gt; {
    log.&lt;span style=&quot;color:#447fcf&quot;&gt;Fatal&lt;/span&gt;(err)
}

fmt.&lt;span style=&quot;color:#447fcf&quot;&gt;Println&lt;/span&gt;(version)
</code></pre>
<p>}
<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted -->int<!-- raw HTML omitted --> <!-- raw HTML omitted -->main<!-- raw HTML omitted -->(<!-- raw HTML omitted -->int<!-- raw HTML omitted --> argc, <!-- raw HTML omitted -->char<!-- raw HTML omitted --> *argv[])
{
Diatheke::Client client(serverAddr);
std::string version = client.diathekeVersion();
std::cout &lt;&lt; <!-- raw HTML omitted -->&quot;Diatheke version: &quot;<!-- raw HTML omitted --> &lt;&lt; version &lt;&lt; std::endl;</p>
<pre><code>&lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color:#3677a9&quot;&gt;0&lt;/span&gt;;
</code></pre>
<p>}</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>client = diatheke.Client(server_address=<!-- raw HTML omitted -->&quot;localhost:9002&quot;<!-- raw HTML omitted -->)
version = client.diatheke_version()
<!-- raw HTML omitted -->print<!-- raw HTML omitted -->(<!-- raw HTML omitted -->&quot;Diatheke version {}&quot;<!-- raw HTML omitted -->.format(version))
<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted -->class<!-- raw HTML omitted --> <!-- raw HTML omitted -->DiathekeConnection<!-- raw HTML omitted --> {</p>
<pre><code>&lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color:#40ffff&quot;&gt;serverAddress&lt;/span&gt; = &lt;span style=&quot;color:#ed9d13&quot;&gt;&amp;#34;localhost&amp;#34;&lt;/span&gt;
&lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color:#40ffff&quot;&gt;serverPort&lt;/span&gt; = &lt;span style=&quot;color:#3677a9&quot;&gt;9002&lt;/span&gt;

&lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color:#40ffff&quot;&gt;client&lt;/span&gt; = Client(host: serverAddress, port: serverPort, useTLS: &lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;true&lt;/span&gt;)
</code></pre>
<p>}
<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="insecure-connection">Insecure Connection</h2>
<p>It is sometimes required to connect to Diatheke server without TLS enabled
(during debugging, for example). Note that if the server has TLS enabled,
attempting to connect with an insecure client will fail.</p>
<p>To create an insecure connection, do the following when creating the client:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="client-authentication">Client Authentication</h2>
<p>In our recommended default setup, TLS is enabled in the gRPC setup, and when
connecting to the server, clients validate the server&rsquo;s SSL certificate to make
sure they are talking to the right party.  This is similar to how &ldquo;https&rdquo;
connections work in web browsers.</p>
<p>In some setups, it may be desired that the server should also validate clients
connecting to it and only respond to the ones it can verify. If your Diatheke
server is configured to do client authentication, you will need to present the
appropriate certificate and key when connecting to it.</p>
<p>Please note that in the client-authentication mode, the client will still also
verify the server&rsquo;s certificate, and therefore this setup uses mutually
authenticated TLS. This can be done with:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted -->class<!-- raw HTML omitted --> <!-- raw HTML omitted -->DiathekeConnection<!-- raw HTML omitted --> {</p>
<pre><code>&lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color:#40ffff&quot;&gt;serverAddress&lt;/span&gt; = &lt;span style=&quot;color:#ed9d13&quot;&gt;&amp;#34;localhost&amp;#34;&lt;/span&gt;
&lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color:#40ffff&quot;&gt;serverPort&lt;/span&gt; = &lt;span style=&quot;color:#3677a9&quot;&gt;9002&lt;/span&gt;

&lt;span style=&quot;color:#6ab825;font-weight:bold&quot;&gt;let&lt;/span&gt; &lt;span style=&quot;color:#40ffff&quot;&gt;client&lt;/span&gt; = Client(host: serverAddress, port: serverPort, tlsCertificateFileName: &lt;span style=&quot;color:#ed9d13&quot;&gt;&amp;#34;root&amp;#34;&lt;/span&gt;, tlsCertificateFormat: .pem)
</code></pre>
<p>}
<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/sdk-diatheke/using-diatheke-sdk/errors/" title="Error Handling"> <i class="fa fa-chevron-left"></i><label>Error Handling</label></a>
    <a class="nav nav-next" href="/sdk-diatheke/using-diatheke-sdk/session/" title="Sessions" style="margin-right: 0px;"><label>Sessions</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/sdk-diatheke/js/clipboard.min.js"></script>
<script src="/sdk-diatheke/js/featherlight.min.js"></script>
<script src="/sdk-diatheke/js/html5shiv-printshiv.min.js"></script>

<script src="/sdk-diatheke/js/modernizr.custom.71422.js"></script>
<script src="/sdk-diatheke/js/docdock.js"></script>
<script src="/sdk-diatheke/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>